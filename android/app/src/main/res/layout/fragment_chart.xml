<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="8dp">

    <!-- Search bar with interval selector -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginBottom="8dp">

        <EditText
            android:id="@+id/searchEditText"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="Enter stock symbol"/>

        <ImageButton
            android:id="@+id/searchButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/ic_menu_search"
            android:contentDescription="Search"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:layout_gravity="center_vertical"
            android:layout_marginStart="8dp"
            android:layout_marginEnd="8dp"/>

        <Spinner
            android:id="@+id/intervalSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:entries="@array/intervals_array"/>
    </LinearLayout>

    <!-- Loading indicator -->
    <ProgressBar
        android:id="@+id/progressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:visibility="gone" />

    <!-- Collapsible Stock Info Section -->
    <LinearLayout
        android:id="@+id/infoHeaderLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:padding="8dp"
        android:clickable="true"
        android:focusable="true"
        android:background="?attr/selectableItemBackground">
        <TextView android:text="Company:" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
        <TextView android:id="@+id/companyNameTextView" android:layout_marginEnd="16dp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="--"/>
        <TextView android:text="Sector:" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
        <TextView android:id="@+id/sectorTextView" android:layout_marginEnd="16dp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="--"/>
        <ImageView
            android:id="@+id/infoExpandIcon"
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@android:drawable/arrow_down_float"
            android:layout_gravity="end"/>
    </LinearLayout>
    <LinearLayout
        android:id="@+id/infoDetailsLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingStart="32dp"
        android:paddingEnd="32dp">
        <LinearLayout android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="horizontal">
            <TextView android:text="Price:" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
            <TextView android:id="@+id/priceTextView" android:layout_marginEnd="16dp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="--"/>
            <TextView android:text="Market Cap:" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
            <TextView android:id="@+id/marketCapTextView" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="--"/>
        </LinearLayout>
        <LinearLayout android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="horizontal">
            <TextView android:text="PE Ratio:" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
            <TextView android:id="@+id/peRatioTextView" android:layout_marginEnd="16dp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="--"/>
            <TextView android:text="PB Ratio:" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
            <TextView android:id="@+id/pbRatioTextView" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="--"/>
        </LinearLayout>
    </LinearLayout>

    <!-- Indicator and drawing icons row -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_marginBottom="8dp">
        <ImageButton
            android:id="@+id/emaIcon"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:src="@android:drawable/ic_menu_sort_by_size"
            android:contentDescription="EMA"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:layout_marginEnd="8dp"/>
        <ImageButton
            android:id="@+id/macdIcon"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:src="@android:drawable/ic_menu_share"
            android:contentDescription="MACD"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:layout_marginEnd="8dp"/>
        <ImageButton
            android:id="@+id/rsiIcon"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:src="@android:drawable/ic_menu_recent_history"
            android:contentDescription="RSI"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:layout_marginEnd="8dp"/>
        <ImageButton
            android:id="@+id/drawIcon"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:src="@android:drawable/ic_menu_edit"
            android:contentDescription="Drawing"
            android:background="?attr/selectableItemBackgroundBorderless"/>
    </LinearLayout>

    <com.github.mikephil.charting.charts.CombinedChart
        android:id="@+id/candleChart"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.8" />

    <com.github.mikephil.charting.charts.BarChart
        android:id="@+id/volumeChart"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.2" />

</LinearLayout> 